# 待解决问题
~~* game总控调整~~
~~* 画板点击事件，切换面板图片 / 给图片添加背景和边缘线？~~
~~* 画板功能逻辑~~
~~* 背景图片 - 画圆剪切？Mask?边角？或trimmed the corner transparent - 都行，图片大的话画吧~~
~~* 画线效果不理想 - 声明周期的使用，update? - ticker？ 圆点单独点击可以画出？~~
~~* 画板附近点击出圆点？？~~
~~* 连着触发好多个组件的相同类型事件？  -  在捕获阶段处理~~
~~* emit事件 - 跨组件传递 - 全局一个eventTarget变量~~
~~* 色板：纯色组件/图片/graphics生成，点击事件的区域？？~~
~~* mask里使用graphics对象实践方法 ~~
* 文档学习 - 组件继承关系、不同层级调整之间的关系
* drawcall调用 - 性能方面了解 - 不同设备跑起来效果
* websocket传递数据 + 斗牛部分学习
* 总结学习文档


# 汇报内容
2023-01-17 cocos进展：
1、使用cocos将基础功能实现 - 1.18完成（年前）
  - 画线功能: 暂无问题；
  - 画板操作面板功能: 暂无问题；   
2、cocos构建体验 - 1.18完成（年前）
3、cocos功能模块部分系统学习
4、根据UI设计稿开发
5、配合安全完成上报
6、性能优化

# 2023-01-16
* websocket传递数据 + 斗牛部分学习
~~* 画板点击事件，切换面板图片 / 给图片添加背景和边缘线？~~
~~* 画板功能逻辑~~
~~* vue面试链接复习~~
~~* 请假及加班邮件~~

# 2023-01-17
~~* websocket传递数据 + 斗牛部分学习~~
~~* 导出基础板~~
* 前端优化重新整理
* vue原理书籍之vuessr
~~* 简单总结动画学习的进度及遗留问题~~

# 2023-01-18
* 前端优化重新整理
* vue原理书籍
* 简单总结动画学习的进度及遗留问题



# 学习顶牛问题
* 资源组件化
可以提前搞固定的toast-perhab组件集 或 让设计同时直接使用该软件开发动画等，直接引用应用；
是否支持npm包引入 ？ 

检测用户退出当前页面或当前应用的子应用的办法？ - focus？后台长时间无心跳反馈标记退出？
插件？？什么场景应用，应用思路 - myLog？ loader ？
微信小游戏引擎兼容插件支持 cocos creater的什么版本 ？ 小程序呢？
底层打包原理 ？ 打包工具 ？
部署方式？ nginx.conf ？node程序替换文件内容
外部loader资源，尤其cdn的办法？有没有其他替代办法

## 认识性能数据：
时间性能瓶颈：drawcall、logic、physics、renderer、triangle 等执行加载
空间性能瓶颈：渲染纹理数量、节点数量、加载资源数量、无用资源释放、代码内存泄露（缓存）

Framerate(FPS)  26/30  帧率，也叫每秒传输帧数(FPS：Frames Per Second)，是指画面每秒传输帧数，通俗来讲就是指动画或视频的画面数；每秒钟帧数越多，所显示的动作就会越流畅，但GPU处理的数据量也会激增，可能引起卡顿。一般对于手游，我们设定游戏以60帧为目标满帧运行，当低于30帧时，则会感受到明显的卡顿。

Draw call       17
一种命令，CPU和GPU是并行工作的，它们之间存在一个命令缓冲区。当CPU需要调用图形编程接口的时候就会往命令缓冲区里面增加命令，当GPU完成上一次渲染命令的时候就会继续从命令缓冲区中执行下一条命令，命令缓冲区里面的命令有很多种，而drawcall就是其中的一种。
CPU在提交drawcall的时候需要处理很多东西，如一些数据、状态、命令等，有些渲染卡顿问题就是因为GPU渲染速度比drawcall的提交速度快，可能上一次渲染完了，CPU还在计算drawcall，所以drawcall过高会造成CPU性能瓶颈。

Frame time(ms)  1.6
Frame time = 1/ FPS, 每一帧的时间。从技术上讲，如果我们的游戏运行预期目标是满帧60帧，每帧的最大预算为16毫秒（1000毫秒/每秒60帧≈16毫秒）。

Instance Count  0
GPU INSTANCING的数量。INSTANCING指几何体实例化：
图形API每秒能渲染的批次有限，想要渲染一片森林（有小差异的大量小物体）的话需要用到实例化。
实例化目标是使应用程序能最小化状态和纹理变化次数，并在一次图形接口调用中把同一批次的同一个三角形渲染多次，这样就能最小化花费在提交批次的CPU时间,即所谓的“一次提交，多次渲染”。在用于大批量重复物件渲染时效果显著。
当合批生效时，该数值会增大。

Triangle        598
三角面数量，在2D游戏开发中，纹理贴图都是矩形存在的，一个矩形由两个三角形组成，所以一张纹理贴图占用两个三角面数量。在3D游戏中，模型Mesh由N个小三角面形成。

Game Logic(ms)  0.06  游戏逻辑耗时

Physics(ms)     0.02  无力引擎耗时
Renderer(ms)    1.28  渲染耗时
GFX Texture Mem(M)  28.21   纹理缓存
GFX Buffer Mem(M)   22.51   GFX缓存

### 一些优化方法
全屏界面关闭其他场景及摄像机
把相关图片缩放到合适的大小（避免缩放差值）重新保存到一个新文件中，并加入静态图集，同一静态合集图片放到临近位置。
合批：分批子节点；

## 声明周期及父子加载关系
没有固定声明周期，初始化顺序不保证，手动声明脚本间的 executionOrder

__preload、onLoad 依赖节点。onEnable、start、update、lateUpdate、onDisable、onDestroy 依赖组件。
它们的区别在于：
如果脚本组件所在节点的 active = true，但脚本组件的 enabled = false，依然会执行节点相关回调，但不会执行组件相关回调。只有在 enabled = true 的情况下，组件相关回调才会被执行。
如果脚本组件所在节点的 active = false，无论脚本组件的 enabled 为 true 或 false，都不会执行任何回调。

## 待看文档：
[Cocos Creator 脚本组件的生与死！](https://jishuin.proginn.com/p/763bfbd590cd)
[从源码角度浅析cocos2d-js原理 2021-09](https://juejin.cn/post/7003621023140708389)
[基于 Cocos 的高性能跨平台开发方案](https://cloud.tencent.com/developer/article/1175153)
cocos弹窗调度器，避免因挂载再场景里头的节点同时弹出。
VideoPlayer独立置顶，无法在视频上绘制UI。 —— 底层各个端开发视频播放器，实现各自界面的定制

静态Sprite合并图集减少drawcall（AutoAtlas）；文本动态绘制，看使用BMFont位图字体取代普通文本。


# 其他
学习思路：先练习体会后看文档学习如何应用，再看构建部署、性能优化，再看底层原理及生态；
  回顾知识：文档先看一部分，有量了再分类，假设面试官会问什么问题，问到想不出其他问题，看面经；
  针对一项新技术如何学习：归类知识寻找练习、试猜、对比、整理问题、解决问题、开发上线流程梳理问题、面经；
  针对性能步骤：设定性能指标、统计数据、流程、分析，找各个步骤的资料文档；
  极端型bug：考虑各个环节，先排除代码问题，后定位运维问题
